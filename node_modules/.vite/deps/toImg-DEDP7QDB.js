import "./chunk-NMVDEOIR.js";
import {
  d
} from "./chunk-DE7FNCPF.js";
import "./chunk-7COCJB37.js";
import {
  l
} from "./chunk-2WNKBZP6.js";

// node_modules/@zumer/snapdom/dist/modules/chunks/chunk-4IERUYP4.js
async function x(i, g) {
  let { scale: n = 1, width: h, height: o, meta: e = {} } = g, c = Number.isFinite(h), d2 = Number.isFinite(o), p = Number.isFinite(n) && n !== 1 || c || d2;
  if (l() && p) return await d(i, { ...g, format: "png", quality: 1, meta: e });
  let t = new Image();
  if (t.decoding = "sync", t.loading = "eager", t.src = i, await t.decode(), c && d2) t.style.width = `${h}px`, t.style.height = `${o}px`;
  else if (c) {
    let s = Number.isFinite(e.w0) ? e.w0 : t.naturalWidth, a = Number.isFinite(e.h0) ? e.h0 : t.naturalHeight, r = h / Math.max(1, s);
    t.style.width = `${h}px`, t.style.height = `${Math.round(a * r)}px`;
  } else if (d2) {
    let s = Number.isFinite(e.w0) ? e.w0 : t.naturalWidth, a = Number.isFinite(e.h0) ? e.h0 : t.naturalHeight, r = o / Math.max(1, a);
    t.style.height = `${o}px`, t.style.width = `${Math.round(s * r)}px`;
  } else {
    let s = Math.round(t.naturalWidth * n), a = Math.round(t.naturalHeight * n);
    if (t.style.width = `${s}px`, t.style.height = `${a}px`, typeof i == "string" && i.startsWith("data:image/svg+xml")) try {
      let f = decodeURIComponent(i.split(",")[1]).replace(/width="[^"]*"/, `width="${s}"`).replace(/height="[^"]*"/, `height="${a}"`);
      i = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(f)}`, t.src = i;
    } catch {
    }
  }
  return t;
}
export {
  x as toImg,
  x as toSvg
};
//# sourceMappingURL=toImg-DEDP7QDB.js.map
