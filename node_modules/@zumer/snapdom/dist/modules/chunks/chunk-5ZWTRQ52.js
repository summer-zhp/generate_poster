/*
* SnapDOM
* v2.0.1
* Author: Juan Martin Muda
* License: MIT
*/
import{a as x,c as V,f as O,g as z,o as B,q as j}from"./chunk-GZX3IERM.js";var tt=[/font\s*awesome/i,/material\s*icons/i,/ionicons/i,/glyphicons/i,/feather/i,/bootstrap\s*icons/i,/remix\s*icons/i,/heroicons/i,/layui/i,/lucide/i],E=Object.assign({materialIconsFilled:"https://fonts.gstatic.com/s/materialicons/v48/flUhRq6tzZclQEJ-Vdg-IuiaDsNcIhQ8tQ.woff2",materialIconsOutlined:"https://fonts.gstatic.com/s/materialiconsoutlined/v110/gok-H7zzDkdnRel8-DQ6KAXJ69wP1tGnf4ZGhUcel5euIg.woff2",materialIconsRound:"https://fonts.gstatic.com/s/materialiconsround/v109/LDItaoyNOAY6Uewc665JcIzCKsKc_M9flwmPq_HTTw.woff2",materialIconsSharp:"https://fonts.gstatic.com/s/materialiconssharp/v110/oPWQ_lt5nv4pWNJpghLP75WiFR4kLh3kvmvRImcycg.woff2"},typeof window<"u"&&window.__SNAPDOM_ICON_FONTS__||{}),W=[];function St(n){let t=Array.isArray(n)?n:[n];for(let o of t)o instanceof RegExp?W.push(o):typeof o=="string"?W.push(new RegExp(o,"i")):console.warn("[snapdom] Ignored invalid iconFont value:",o)}function R(n){let t=typeof n=="string"?n:"",o=[...tt,...W];for(let s of o)if(s instanceof RegExp&&s.test(t))return!0;return!!(/icon/i.test(t)||/glyph/i.test(t)||/symbols/i.test(t)||/feather/i.test(t)||/fontawesome/i.test(t))}function et(n=""){let t=String(n).toLowerCase();return/\bmaterial\s*icons\b/.test(t)||/\bmaterial\s*symbols\b/.test(t)}var H=new Map;function nt(n=""){let t=Object.create(null),o=String(n||""),s=/['"]?\s*([A-Za-z]{3,4})\s*['"]?\s*([+-]?\d+(?:\.\d+)?)\s*/g,i;for(;i=s.exec(o);)t[i[1].toUpperCase()]=Number(i[2]);return t}async function ot(n,t,o){let s=String(n||""),i=s.toLowerCase(),c=String(t||"").toLowerCase();if(/\bmaterial\s*icons\b/.test(i)&&!/\bsymbols\b/.test(i))return{familyForMeasure:s,familyForCanvas:s};if(!/\bmaterial\s*symbols\b/.test(i))return{familyForMeasure:s,familyForCanvas:s};let f=o&&(o.FILL??o.fill),a="outlined";/\brounded\b/.test(c)||/\bround\b/.test(c)?a="rounded":/\bsharp\b/.test(c)?a="sharp":/\boutlined\b/.test(c)&&(a="outlined");let m=f===1,u=null;if(m&&(a==="outlined"&&E.materialIconsFilled?u={url:E.materialIconsFilled,alias:"snapdom-mi-filled"}:a==="rounded"&&E.materialIconsRound?u={url:E.materialIconsRound,alias:"snapdom-mi-round"}:a==="sharp"&&E.materialIconsSharp&&(u={url:E.materialIconsSharp,alias:"snapdom-mi-sharp"})),!u)return{familyForMeasure:s,familyForCanvas:s};if(!H.has(u.alias))try{let d=new FontFace(u.alias,`url(${u.url})`,{style:"normal",weight:"400"});document.fonts.add(d),await d.load(),H.set(u.alias,!0)}catch{return{familyForMeasure:s,familyForCanvas:s}}let h=`"${u.alias}"`;return{familyForMeasure:h,familyForCanvas:h}}async function st(n="Material Icons",t=24){try{await Promise.all([document.fonts.load(`400 ${t}px "${String(n).replace(/["']/g,"")}"`),document.fonts.ready])}catch{}}function rt(n){let t=n.getPropertyValue("-webkit-text-fill-color")?.trim()||"",o=/^transparent$/i.test(t)||/rgba?\(\s*0\s*,\s*0\s*,\s*0\s*,\s*0\s*\)/i.test(t);if(t&&!o&&t.toLowerCase()!=="currentcolor")return t;let s=n.color?.trim();return s&&s!=="inherit"?s:"#000"}async function it(n,{family:t="Material Icons",weight:o="normal",fontSize:s=32,color:i="#000",variation:c="",className:e=""}={}){let f=String(t||"").replace(/^['"]+|['"]+$/g,""),a=window.devicePixelRatio||1,m=nt(c),{familyForMeasure:u,familyForCanvas:h}=await ot(f,e,m);await st(h.replace(/^["']+|["']+$/g,""),s);let d=document.createElement("span");d.textContent=n,d.style.position="absolute",d.style.visibility="hidden",d.style.left="-99999px",d.style.whiteSpace="nowrap",d.style.fontFamily=u,d.style.fontWeight=String(o||"normal"),d.style.fontSize=`${s}px`,d.style.lineHeight="1",d.style.margin="0",d.style.padding="0",d.style.fontFeatureSettings="'liga' 1",d.style.fontVariantLigatures="normal",d.style.color=i,document.body.appendChild(d);let b=d.getBoundingClientRect(),S=Math.max(1,Math.ceil(b.width)),r=Math.max(1,Math.ceil(b.height));document.body.removeChild(d);let l=document.createElement("canvas");l.width=S*a,l.height=r*a;let p=l.getContext("2d");p.scale(a,a),p.font=`${o?`${o} `:""}${s}px ${h}`,p.textAlign="left",p.textBaseline="top",p.fillStyle=i;try{p.fontKerning="normal"}catch{}return p.fillText(n,0,0),{dataUrl:l.toDataURL(),width:S,height:r}}async function bt(n,t){if(!(n instanceof Element))return 0;let o='.material-icons, [class*="material-symbols"]',s=Array.from(n.querySelectorAll(o)).filter(e=>e&&e.textContent&&e.textContent.trim());if(s.length===0)return 0;let i=t instanceof Element?Array.from(t.querySelectorAll(o)).filter(e=>e&&e.textContent&&e.textContent.trim()):[],c=0;for(let e=0;e<s.length;e++){let f=s[e],a=i[e]||null;try{let m=getComputedStyle(a||f),u=m.fontFamily||"Material Icons";if(!et(u))continue;let h=(a||f).textContent.trim();if(!h)continue;let d=parseInt(m.fontSize,10)||24,b=m.fontWeight&&m.fontWeight!=="normal"?m.fontWeight:"normal",S=rt(m),r=m.fontVariationSettings&&m.fontVariationSettings!=="normal"?m.fontVariationSettings:"",l=(a||f).className||"",{dataUrl:p,width:w,height:g}=await it(h,{family:u,weight:b,fontSize:d,color:S,variation:r,className:l});f.textContent="";let y=f.ownerDocument.createElement("img");y.src=p,y.alt=h,y.style.height=`${d}px`,y.style.width=`${Math.max(1,Math.round(w/g*d))}px`,y.style.objectFit="contain",y.style.verticalAlign=getComputedStyle(f).verticalAlign||"baseline",f.appendChild(y),c++}catch{}}return c}async function Rt(n,t,o,s=32,i="#000"){t=t.replace(/^['"]+|['"]+$/g,"");let c=window.devicePixelRatio||1;try{await document.fonts.ready}catch{}let e=document.createElement("span");e.textContent=n,e.style.position="absolute",e.style.visibility="hidden",e.style.fontFamily=`"${t}"`,e.style.fontWeight=o||"normal",e.style.fontSize=`${s}px`,e.style.lineHeight="1",e.style.whiteSpace="nowrap",e.style.padding="0",e.style.margin="0",document.body.appendChild(e);let f=e.getBoundingClientRect(),a=Math.ceil(f.width),m=Math.ceil(f.height);document.body.removeChild(e);let u=document.createElement("canvas");u.width=Math.max(1,a*c),u.height=Math.max(1,m*c);let h=u.getContext("2d");return h.scale(c,c),h.font=o?`${o} ${s}px "${t}"`:`${s}px "${t}"`,h.textAlign="left",h.textBaseline="top",h.fillStyle=i,h.fillText(n,0,0),{dataUrl:u.toDataURL(),width:a,height:m}}var at=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","emoji","math","fangsong","ui-serif","ui-sans-serif","ui-monospace","ui-rounded"]);function T(n){if(!n)return"";for(let t of n.split(",")){let o=t.trim().replace(/^['"]+|['"]+$/g,"");if(o&&!at.has(o.toLowerCase()))return o}return""}function P(n){let t=String(n??"400").trim().toLowerCase();if(t==="normal")return 400;if(t==="bold")return 700;let o=parseInt(t,10);return Number.isFinite(o)?Math.min(900,Math.max(100,o)):400}function U(n){let t=String(n??"normal").trim().toLowerCase();return t.startsWith("italic")?"italic":t.startsWith("oblique")?"oblique":"normal"}function ct(n){let t=String(n??"100%").match(/(\d+(?:\.\d+)?)\s*%/);return t?Math.max(50,Math.min(200,parseFloat(t[1]))):100}function lt(n){let t=String(n||"400").trim(),o=t.match(/^(\d{2,3})\s+(\d{2,3})$/);if(o){let i=P(o[1]),c=P(o[2]);return{min:Math.min(i,c),max:Math.max(i,c)}}let s=P(t);return{min:s,max:s}}function ft(n){let t=String(n||"normal").trim().toLowerCase();return t==="italic"?{kind:"italic"}:t.startsWith("oblique")?{kind:"oblique"}:{kind:"normal"}}function mt(n){let t=String(n||"100%").trim(),o=t.match(/(\d+(?:\.\d+)?)\s*%\s+(\d+(?:\.\d+)?)\s*%/);if(o){let c=parseFloat(o[1]),e=parseFloat(o[2]);return{min:Math.min(c,e),max:Math.max(c,e)}}let s=t.match(/(\d+(?:\.\d+)?)\s*%/),i=s?parseFloat(s[1]):100;return{min:i,max:i}}function ut(n,t){if(!n)return!1;try{let o=new URL(n,location.href);if(o.origin===location.origin)return!0;let i=o.host.toLowerCase();if(["fonts.googleapis.com","fonts.gstatic.com","use.typekit.net","p.typekit.net","kit.fontawesome.com","use.fontawesome.com"].some(f=>i.endsWith(f)))return!0;let e=(o.pathname+o.search).toLowerCase();if(/\bfont(s)?\b/.test(e)||/\.woff2?(\b|$)/.test(e))return!0;for(let f of t){let a=f.toLowerCase().replace(/\s+/g,"+"),m=f.toLowerCase().replace(/\s+/g,"-");if(e.includes(a)||e.includes(m))return!0}return!1}catch{return!1}}function dt(n){let t=new Set;for(let o of n||[]){let s=String(o).split("__")[0]?.trim();s&&t.add(s)}return t}function K(n,t){return n&&n.replace(/url\(\s*(['"]?)([^)'"]+)\1\s*\)/g,(o,s,i)=>{let c=(i||"").trim();if(!c||/^data:|^blob:|^https?:|^file:|^about:/i.test(c))return o;let e=c;try{e=new URL(c,t||location.href).href}catch{}return`url("${e}")`})}var q=/@import\s+(?:url\(\s*(['"]?)([^)"']+)\1\s*\)|(['"])([^"']+)\3)([^;]*);/g,N=4;async function ht(n,t,o){if(!n)return n;let s=new Set;function i(f,a){try{return new URL(f,a||location.href).href}catch{return f}}async function c(f,a,m=0){if(m>N)return console.warn(`[snapDOM] @import depth exceeded (${N}) at ${a}`),f;let u="",h=0,d;for(;d=q.exec(f);){u+=f.slice(h,d.index),h=q.lastIndex;let b=(d[2]||d[4]||"").trim(),S=i(b,a);if(s.has(S)){console.warn(`[snapDOM] Skipping circular @import: ${S}`);continue}s.add(S);let r="";try{let l=await O(S,{as:"text",useProxy:o,silent:!0});l.ok&&typeof l.data=="string"&&(r=l.data)}catch{}r?(r=K(r,S),r=await c(r,S,m+1),u+=`
/* inlined: ${S} */
${r}
`):u+=d[0]}return u+=f.slice(h),u}let e=K(n,t||location.href);return e=await c(e,t||location.href,0),e}var X=/url\((["']?)([^"')]+)\1\)/g,pt=/@font-face[^{}]*\{[^}]*\}/g;function J(n){if(!n)return[];let t=[],o=n.split(",").map(s=>s.trim()).filter(Boolean);for(let s of o){let i=s.match(/^U\+([0-9A-Fa-f?]+)(?:-([0-9A-Fa-f?]+))?$/);if(!i)continue;let c=i[1],e=i[2],f=a=>{if(!a.includes("?"))return parseInt(a,16);let m=parseInt(a.replace(/\?/g,"0"),16),u=parseInt(a.replace(/\?/g,"F"),16);return[m,u]};if(e){let a=f(c),m=f(e),u=Array.isArray(a)?a[0]:a,h=Array.isArray(m)?m[1]:m;t.push([Math.min(u,h),Math.max(u,h)])}else{let a=f(c);Array.isArray(a)?t.push([a[0],a[1]]):t.push([a,a])}}return t}function Q(n,t){if(!t.length||!n||n.size===0)return!0;for(let o of n)for(let[s,i]of t)if(o>=s&&o<=i)return!0;return!1}function D(n,t){let o=[];if(!n)return o;for(let s of n.matchAll(X)){let i=(s[2]||"").trim();if(!(!i||i.startsWith("data:"))){if(!/^https?:/i.test(i))try{i=new URL(i,t||location.href).href}catch{}o.push(i)}}return o}async function Y(n,t,o=""){let s=n;for(let i of n.matchAll(X)){let c=V(i[0]);if(!c)continue;let e=c;if(!e.startsWith("http")&&!e.startsWith("data:"))try{e=new URL(e,t||location.href).href}catch{}if(!R(e)){if(x.resource?.has(e)){x.font?.add(e),s=s.replace(i[0],`url(${x.resource.get(e)})`);continue}if(!x.font?.has(e))try{let f=await O(e,{as:"dataURL",useProxy:o,silent:!0});if(f.ok&&typeof f.data=="string"){let a=f.data;x.resource?.set(e,a),x.font?.add(e),s=s.replace(i[0],`url(${a})`)}}catch{console.warn("[snapDOM] Failed to fetch font resource:",e)}}}return s}function yt(n){if(!n.length)return null;let t=(f,a)=>n.some(([m,u])=>!(u<f||m>a)),o=t(0,255)||t(305,305),s=t(256,591)||t(7680,7935),i=t(880,1023),c=t(1024,1279);return t(7840,7929)||t(258,259)||t(416,417)||t(431,432)?"vietnamese":c?"cyrillic":i?"greek":s?"latin-ext":o?"latin":null}function G(n={}){let t=new Set((n.families||[]).map(i=>String(i).toLowerCase())),o=new Set((n.domains||[]).map(i=>String(i).toLowerCase())),s=new Set((n.subsets||[]).map(i=>String(i).toLowerCase()));return(i,c)=>{if(t.size&&t.has(i.family.toLowerCase()))return!0;if(o.size)for(let e of i.srcUrls)try{if(o.has(new URL(e).host.toLowerCase()))return!0}catch{}if(s.size){let e=yt(c);if(e&&s.has(e))return!0}return!1}}function gt(n){if(!n)return n;let t=/@font-face[^{}]*\{[^}]*\}/gi,o=new Set,s=[];for(let c of n.match(t)||[]){let e=c.match(/font-family:\s*([^;]+);/i)?.[1]||"",f=T(e),a=(c.match(/font-weight:\s*([^;]+);/i)?.[1]||"400").trim(),m=(c.match(/font-style:\s*([^;]+);/i)?.[1]||"normal").trim(),u=(c.match(/font-stretch:\s*([^;]+);/i)?.[1]||"100%").trim(),h=(c.match(/unicode-range:\s*([^;]+);/i)?.[1]||"").trim(),d=(c.match(/src\s*:\s*([^;}]+)[;}]/i)?.[1]||"").trim(),b=D(d,location.href),S=b.length?b.map(l=>String(l).toLowerCase()).sort().join("|"):d.toLowerCase(),r=[String(f||"").toLowerCase(),a,m,u,h.toLowerCase(),S].join("|");o.has(r)||(o.add(r),s.push(c))}if(s.length===0)return n;let i=0;return n.replace(t,()=>s[i++]||"")}function wt(n,t,o,s){let i=Array.from(n||[]).sort().join("|"),c=t?JSON.stringify({families:(t.families||[]).map(a=>String(a).toLowerCase()).sort(),domains:(t.domains||[]).map(a=>String(a).toLowerCase()).sort(),subsets:(t.subsets||[]).map(a=>String(a).toLowerCase()).sort()}):"",e=(o||[]).map(a=>`${(a.family||"").toLowerCase()}::${a.weight||"normal"}::${a.style||"normal"}::${a.src||""}`).sort().join("|");return`fonts-embed-css::req=${i}::ex=${c}::lf=${e}::px=${s||""}`}async function Z(n,t,o,s){let i;try{i=n.cssRules||[]}catch{return}let c=(e,f)=>{try{return new URL(e,f||location.href).href}catch{return e}};for(let e of i){if(e.type===CSSRule.IMPORT_RULE&&e.styleSheet){let f=e.href?c(e.href,t):t;if(s.depth>=N){console.warn(`[snapDOM] CSSOM import depth exceeded (${N}) at ${f}`);continue}if(f&&s.visitedSheets.has(f)){console.warn(`[snapDOM] Skipping circular CSSOM import: ${f}`);continue}f&&s.visitedSheets.add(f);let a={...s,depth:(s.depth||0)+1};await Z(e.styleSheet,f,o,a);continue}if(e.type===CSSRule.FONT_FACE_RULE){let f=(e.style.getPropertyValue("font-family")||"").trim(),a=T(f);if(!a||R(a))continue;let m=(e.style.getPropertyValue("font-weight")||"400").trim(),u=(e.style.getPropertyValue("font-style")||"normal").trim(),h=(e.style.getPropertyValue("font-stretch")||"100%").trim(),d=(e.style.getPropertyValue("src")||"").trim(),b=(e.style.getPropertyValue("unicode-range")||"").trim();if(!s.faceMatchesRequired(a,u,m,h))continue;let S=J(b);if(!Q(s.usedCodepoints,S))continue;let r={family:a,weightSpec:m,styleSpec:u,stretchSpec:h,unicodeRange:b,srcRaw:d,srcUrls:D(d,t||location.href),href:t||location.href};if(s.simpleExcluder&&s.simpleExcluder(r,S))continue;if(/url\(/i.test(d)){let l=await Y(d,t||location.href,s.useProxy);await o(`@font-face{font-family:${a};src:${l};font-style:${u};font-weight:${m};font-stretch:${h};${b?`unicode-range:${b};`:""}}`)}else await o(`@font-face{font-family:${a};src:${d};font-style:${u};font-weight:${m};font-stretch:${h};${b?`unicode-range:${b};`:""}}`)}}}async function Lt({required:n,usedCodepoints:t,exclude:o=void 0,localFonts:s=[],useProxy:i=""}={}){n instanceof Set||(n=new Set),t instanceof Set||(t=new Set);let c=new Map;for(let r of n){let[l,p,w,g]=String(r).split("__");if(!l)continue;let y=c.get(l)||[];y.push({w:parseInt(p,10),s:w,st:parseInt(g,10)}),c.set(l,y)}function e(r,l,p,w){if(!c.has(r))return!1;let g=c.get(r),y=lt(p),C=ft(l),F=mt(w),M=y.min!==y.max,A=y.min,v=k=>C.kind==="normal"&&k==="normal"||C.kind!=="normal"&&(k==="italic"||k==="oblique"),I=!1;for(let k of g){let $=M?k.w>=y.min&&k.w<=y.max:k.w===A,L=v(U(k.s)),_=k.st>=F.min&&k.st<=F.max;if($&&L&&_){I=!0;break}}if(I)return!0;if(!M)for(let k of g){let $=v(U(k.s)),L=k.st>=F.min&&k.st<=F.max;if(Math.abs(A-k.w)<=300&&$&&L)return!0}if(!M&&C.kind==="normal"&&g.some($=>U($.s)!=="normal"))for(let $ of g){let L=Math.abs(A-$.w)<=300,_=$.st>=F.min&&$.st<=F.max;if(L&&_)return!0}return!1}let f=G(o),a=wt(n,o,s,i);if(x.resource?.has(a))return x.resource.get(a);let m=dt(n),u=[],h=q;for(let r of document.querySelectorAll("style")){let l=r.textContent||"";for(let p of l.matchAll(h)){let w=(p[2]||p[4]||"").trim();if(!w||R(w))continue;!!document.querySelector(`link[rel="stylesheet"][href="${w}"]`)||u.push(w)}}u.length&&await Promise.all(u.map(r=>new Promise(l=>{if(document.querySelector(`link[rel="stylesheet"][href="${r}"]`))return l(null);let p=document.createElement("link");p.rel="stylesheet",p.href=r,p.setAttribute("data-snapdom","injected-import"),p.onload=()=>l(p),p.onerror=()=>l(null),document.head.appendChild(p)})));let d="",b=Array.from(document.querySelectorAll('link[rel="stylesheet"]')).filter(r=>!!r.href);for(let r of b)try{if(R(r.href))continue;let l="",p=!1;try{p=new URL(r.href,location.href).origin===location.origin}catch{}if(!p&&!ut(r.href,m))continue;if(p){let g=Array.from(document.styleSheets).find(y=>y.href===r.href);if(g)try{let y=g.cssRules||[];l=Array.from(y).map(C=>C.cssText).join("")}catch{}}if(!l&&(l=(await O(r.href,{as:"text",useProxy:i})).data,R(r.href)))continue;l=await ht(l,r.href,i);let w="";for(let g of l.match(pt)||[]){let y=(g.match(/font-family:\s*([^;]+);/i)?.[1]||"").trim(),C=T(y);if(!C||R(C))continue;let F=(g.match(/font-weight:\s*([^;]+);/i)?.[1]||"400").trim(),M=(g.match(/font-style:\s*([^;]+);/i)?.[1]||"normal").trim(),A=(g.match(/font-stretch:\s*([^;]+);/i)?.[1]||"100%").trim(),v=(g.match(/unicode-range:\s*([^;]+);/i)?.[1]||"").trim(),I=(g.match(/src\s*:\s*([^;}]+)[;}]/i)?.[1]||"").trim(),k=D(I,r.href);if(!e(C,M,F,A))continue;let $=J(v);if(!Q(t,$))continue;let L={family:C,weightSpec:F,styleSpec:M,stretchSpec:A,unicodeRange:v,srcRaw:I,srcUrls:k,href:r.href};if(o&&f(L,$))continue;let _=/url\(/i.test(I)?await Y(g,r.href,i):g;w+=_}w.trim()&&(d+=w)}catch{console.warn("[snapDOM] Failed to process stylesheet:",r.href)}let S={requiredIndex:c,usedCodepoints:t,faceMatchesRequired:e,simpleExcluder:o?G(o):null,useProxy:i,visitedSheets:new Set,depth:0};for(let r of document.styleSheets)if(!(r.href&&b.some(l=>l.href===r.href)))try{let l=r.href||location.href;l&&S.visitedSheets.add(l),await Z(r,l,async p=>{d+=p},S)}catch{}try{for(let r of document.fonts||[]){if(!r||!r.family||r.status!=="loaded"||!r._snapdomSrc)continue;let l=String(r.family).replace(/^['"]+|['"]+$/g,"");if(R(l)||!c.has(l)||o?.families&&o.families.some(w=>String(w).toLowerCase()===l.toLowerCase()))continue;let p=r._snapdomSrc;if(!String(p).startsWith("data:")){if(x.resource?.has(r._snapdomSrc))p=x.resource.get(r._snapdomSrc),x.font?.add(r._snapdomSrc);else if(!x.font?.has(r._snapdomSrc))try{let w=await O(r._snapdomSrc,{as:"dataURL",useProxy:i,silent:!0});if(w.ok&&typeof w.data=="string")p=w.data,x.resource?.set(r._snapdomSrc,p),x.font?.add(r._snapdomSrc);else continue}catch{console.warn("[snapDOM] Failed to fetch dynamic font src:",r._snapdomSrc);continue}}d+=`@font-face{font-family:'${l}';src:url(${p});font-style:${r.style||"normal"};font-weight:${r.weight||"normal"};}`}}catch{}for(let r of s){if(!r||typeof r!="object")continue;let l=String(r.family||"").replace(/^['"]+|['"]+$/g,"");if(!l||R(l)||!c.has(l)||o?.families&&o.families.some(F=>String(F).toLowerCase()===l.toLowerCase()))continue;let p=r.weight!=null?String(r.weight):"normal",w=r.style!=null?String(r.style):"normal",g=r.stretchPct!=null?`${r.stretchPct}%`:"100%",y=String(r.src||""),C=y;if(!C.startsWith("data:")){if(x.resource?.has(y))C=x.resource.get(y),x.font?.add(y);else if(!x.font?.has(y))try{let F=await O(y,{as:"dataURL",useProxy:i,silent:!0});if(F.ok&&typeof F.data=="string")C=F.data,x.resource?.set(y,C),x.font?.add(y);else continue}catch{console.warn("[snapDOM] Failed to fetch localFonts src:",y);continue}}d+=`@font-face{font-family:'${l}';src:url(${C});font-style:${w};font-weight:${p};font-stretch:${g};}`}return d&&(d=gt(d),x.resource?.set(a,d)),d}function Mt(n){let t=new Set;if(!n)return t;let o=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,null),s=e=>{let f=T(e.fontFamily);if(!f)return;let a=(m,u,h)=>`${f}__${P(m)}__${U(u)}__${ct(h)}`;t.add(a(e.fontWeight,e.fontStyle,e.fontStretch))};s(getComputedStyle(n));let i=getComputedStyle(n,"::before");i&&i.content&&i.content!=="none"&&s(i);let c=getComputedStyle(n,"::after");for(c&&c.content&&c.content!=="none"&&s(c);o.nextNode();){let e=o.currentNode,f=getComputedStyle(e);s(f);let a=getComputedStyle(e,"::before");a&&a.content&&a.content!=="none"&&s(a);let m=getComputedStyle(e,"::after");m&&m.content&&m.content!=="none"&&s(m)}return t}function At(n){let t=new Set,o=i=>{if(i)for(let c of i)t.add(c.codePointAt(0))},s=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,null);for(;s.nextNode();){let i=s.currentNode;if(i.nodeType===Node.TEXT_NODE)o(i.nodeValue||"");else if(i.nodeType===Node.ELEMENT_NODE){let c=i;for(let e of["::before","::after"]){let a=getComputedStyle(c,e)?.getPropertyValue("content");if(!(!a||a==="none"))if(/^"/.test(a)||/^'/.test(a))o(a.slice(1,-1));else{let m=a.match(/\\[0-9A-Fa-f]{1,6}/g);if(m)for(let u of m)try{t.add(parseInt(u.slice(1),16))}catch{}}}}}return t}async function It(n,t=2){try{await document.fonts.ready}catch{}let o=Array.from(n||[]).filter(Boolean);if(o.length===0)return;let s=()=>{let i=document.createElement("div");i.style.cssText="position:absolute!important;left:-9999px!important;top:0!important;opacity:0!important;pointer-events:none!important;contain:layout size style;";for(let c of o){let e=document.createElement("span");e.textContent="AaBbGg1234\xC1\xC9\xCD\xD3\xDA\xE7\xF1\u2014\u221E",e.style.fontFamily=`"${c}"`,e.style.fontWeight="700",e.style.fontStyle="italic",e.style.fontSize="32px",e.style.lineHeight="1",e.style.whiteSpace="nowrap",e.style.margin="0",e.style.padding="0",i.appendChild(e)}document.body.appendChild(i),i.offsetWidth,document.body.removeChild(i)};for(let i=0;i<Math.max(1,t);i++)s(),await new Promise(c=>requestAnimationFrame(()=>requestAnimationFrame(c)))}async function Et(n,t,o,s={}){let i=[[n,t]],c=["background-image","mask","mask-image","-webkit-mask","-webkit-mask-image","mask-source","mask-box-image-source","mask-border-source","-webkit-mask-box-image-source","border-image","border-image-source"],e=["mask-position","mask-size","mask-repeat","-webkit-mask-position","-webkit-mask-size","-webkit-mask-repeat","mask-origin","mask-clip","-webkit-mask-origin","-webkit-mask-clip","-webkit-mask-position-x","-webkit-mask-position-y"],f=["background-position","background-position-x","background-position-y","background-size","background-repeat","background-origin","background-clip","background-attachment","background-blend-mode"],a=["border-image-slice","border-image-width","border-image-outset","border-image-repeat"];for(;i.length;){let[m,u]=i.shift(),h=o.get(m)||B(m);o.has(m)||o.set(m,h);let d=(()=>{let r=h.getPropertyValue("border-image"),l=h.getPropertyValue("border-image-source");return r&&r!=="none"||l&&l!=="none"})();for(let r of f){let l=h.getPropertyValue(r);l&&u.style.setProperty(r,l)}for(let r of c){let l=h.getPropertyValue(r);if(!l||l==="none")continue;let p=j(l),w=await Promise.all(p.map(g=>z(g,s)));w.some(g=>g&&g!=="none"&&!/^url\(undefined/.test(g))&&u.style.setProperty(r,w.join(", "))}for(let r of e){let l=h.getPropertyValue(r);!l||l==="initial"||u.style.setProperty(r,l)}if(d)for(let r of a){let l=h.getPropertyValue(r);!l||l==="initial"||u.style.setProperty(r,l)}let b=Array.from(m.children),S=Array.from(u.children).filter(r=>!(r.dataset&&r.dataset.snapdomPseudo));for(let r=0;r<Math.min(b.length,S.length);r++)i.push([b[r],S[r]])}}export{St as a,R as b,bt as c,Rt as d,Lt as e,Mt as f,At as g,It as h,Et as i};
